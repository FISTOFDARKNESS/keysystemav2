<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Carregando...</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#06060b;color:#dff9ff;font-family:Inter,Segoe UI,Arial;display:flex;align-items:center;justify-content:center;min-height:100vh;margin:0;font-size:20px}
</style>
</head>
<body>
<script>
function getLocalVisitor(){return localStorage.getItem('visitor_id')||null}
function setLocalVisitor(v){if(v)localStorage.setItem('visitor_id',v)}
async function loadKey(){
  const visitor=getLocalVisitor()
  const headers=visitor?{'x-visitor-id':visitor}:{}
  const res=await fetch("/.netlify/functions/get-or-create-key",{method:"GET",headers,credentials:"include"})
  if(!res.ok)return
  const j=await res.json()
  if(j.visitor_id)setLocalVisitor(j.visitor_id)
  if(j.public_slug)location.href="/id/"+encodeURIComponent(j.public_slug)
}
loadKey()
</script>
</body>
</html>
