<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• Sistema de Keys - Beta</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>üöÄ SISTEMA DE KEYS - BETA</h1>
        
        <!-- CHECKPOINT: Link para GERAR a key -->
        <section class="checkpoint">
            <h2>üîë PASSO 1: Gere sua Key</h2>
            <p>Clique no link abaixo e complete o checkpoint para receber sua key √∫nica.</p>
            <a href="SEU_LINK_DO_WORK.INK" target="_blank" class="button">
                ‚û°Ô∏è ACESSAR CHECKPOINT DO WORK.INK
            </a>
        </section>
        
        <!-- VALIDA√á√ÉO: Onde o usu√°rio COLOCA a key -->
        <section class="validation">
            <h2>‚ö° PASSO 2: Valide sua Key no Sistema</h2>
            <p>Cole a key recebida no campo abaixo para ativar seu acesso.</p>
            <input type="text" id="keyInput" placeholder="Cole sua key aqui...">
            <button onclick="validateKey()" class="button">‚úÖ VALIDAR KEY</button>
            <p id="result"></p>
        </section>
        
        <!-- INSTALA√á√ÉO LUAU: Instru√ß√µes para o usu√°rio final -->
        <section class="luau-instructions">
            <h2>üéÆ PASSO 3: Use no Jogo (Luau)</h2>
            <p>Se a key for v√°lida, use este C√ìDIGO no script do seu jogo:</p>
            <code id="luauCode" class="code-block">
-- Cole este c√≥digo no seu script Luau<br>
local key = "SUA_KEY_AQUI"<br>
local function validate()<br>
    local url = "https://keysystembeta.netlify.app/.netlify/functions/validate?key=" .. key<br>
    -- ... (resto do c√≥digo do Luau que j√° te passei)
            </code>
            <p><strong>Lembre-se:</strong> A key √© de <strong>USO √öNICO</strong>. Ap√≥s valida√ß√£o, ela se auto-destr√≥i.</p>
        </section>
    </div>

    <script>
        async function validateKey() {
            const key = document.getElementById('keyInput').value.trim();
            const resultElement = document.getElementById('result');
            const luauCodeElement = document.getElementById('luauCode');
            
            if (!key) {
                resultElement.innerHTML = '‚ö†Ô∏è Porra, coloca uma key primeiro.';
                return;
            }
            
            try {
                const response = await fetch(`/.netlify/functions/validate?key=${encodeURIComponent(key)}`);
                const data = await response.json();
                
                if (data.valid) {
                    resultElement.innerHTML = 'üéâ <strong>KEY V√ÅLIDA!</strong> Acesso concedido.';
                    resultElement.style.color = '#00ff00';
                    // Atualiza o c√≥digo Luau com a key fornecida
                    luauCodeElement.innerHTML = luauCodeElement.innerHTML.replace('SUA_KEY_AQUI', key);
                } else {
                    resultElement.innerHTML = '‚ùå <strong>KEY INV√ÅLIDA</strong> ou j√° foi usada.';
                    resultElement.style.color = '#ff0000';
                }
            } catch (error) {
                resultElement.innerHTML = 'üíÄ <strong>ERRO:</strong> ' + error.message;
                resultElement.style.color = '#ff6600';
            }
        }
        
        // Valida ao pressionar Enter
        document.getElementById('keyInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                validateKey();
            }
        });
    </script>
</body>
</html>
